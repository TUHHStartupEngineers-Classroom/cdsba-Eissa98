{
  "hash": "0d195222c84fdb9b726f784d28fd36e0",
  "result": {
    "markdown": "---\ntitle: \"Instrumental Variables\"\n---\n\n\n::: callout-note\nYou can delete everything in here and start fresh.\n:::\n\n\n::: {.cell hash='09_iv_cache/html/unnamed-chunk-1_00cce9722960a60697a9d627640ddcbd'}\n\n```{.r .cell-code}\nrelationship_data<- readRDS(\"D:/TU Hamburg/Semester_5/Causal Data Science for Business Analytics/Causal_Data_Science_Data/Causal_Data_Science_Data/rand_enc.rds\")\n\nView(relationship_data)\n```\n:::\n\n::: {.cell hash='09_iv_cache/html/unnamed-chunk-2_18bd3ce8d1c8f22aa7cbdd60b3861d60'}\n\n```{.r .cell-code}\nlibrary(dagitty)\nlibrary(ggdag)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> \n#> Attaching package: 'ggdag'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> The following object is masked from 'package:stats':\n#> \n#>     filter\n```\n:::\n\n```{.r .cell-code}\nlibrary(ggplot2)\n# Instrumental Variable Estimation - Application\niv_app_expl <- dagify(\n  Y ~ D,\n  Y ~ U,\n  D ~ U,\n  D ~ Z,\n  exposure = \"D\",\n  latent = \"U\",\n  outcome = \"Y\",\n  coords = list(x = c(U = 1, D = 0, Y = 2, Z = -1),\n                y = c(U = 1, D = 0, Y = 0, Z = 0)),\n  labels = c(\"D\" = \"used_ftr\", \n             \"Y\" = \"time_spent\", \n             \"U\" = \"willingness\",\n             \"Z\" = \"rand_enc\")\n)\nggdag(iv_app_expl, text = T) +\n  guides(color = \"none\") +\n  geom_dag_text(color = \"white\") +\n  geom_dag_edges(edge_color = \"white\") +\n  geom_dag_label_repel(aes(label = label))\n```\n\n::: {.cell-output-display}\n![](09_iv_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n::: {.cell hash='09_iv_cache/html/unnamed-chunk-3_060db4ef087ba6ab5d244f8ce2e49d87'}\n\n```{.r .cell-code}\nnaive_biased_model <- lm(time_spent ~ used_ftr, data = relationship_data)\nsummary(naive_biased_model)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = time_spent ~ used_ftr, data = relationship_data)\n#> \n#> Residuals:\n#>      Min       1Q   Median       3Q      Max \n#> -20.4950  -3.5393   0.0158   3.5961  20.5051 \n#> \n#> Coefficients:\n#>             Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept) 18.86993    0.06955   271.3   <2e-16 ***\n#> used_ftr    10.82269    0.10888    99.4   <2e-16 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 5.351 on 9998 degrees of freedom\n#> Multiple R-squared:  0.497,\tAdjusted R-squared:  0.497 \n#> F-statistic:  9881 on 1 and 9998 DF,  p-value: < 2.2e-16\n```\n:::\n:::\n\n::: {.cell hash='09_iv_cache/html/unnamed-chunk-4_8279eb5335b1844b1dba05a011bb8702'}\n\n```{.r .cell-code}\ncor(relationship_data) %>% round(2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#>            rand_enc used_ftr time_spent\n#> rand_enc       1.00     0.20       0.13\n#> used_ftr       0.20     1.00       0.71\n#> time_spent     0.13     0.71       1.00\n```\n:::\n:::\n\n3- It is shown from the correlation matrix that the rand_enc has a positively correlated with the used filter by 0.2, which shows that the people with willingness or motivation tends to use the app more time. Additionally the used filter is directly proportional with the time_spent on the app by 0.71.\n\n\n::: {.cell hash='09_iv_cache/html/unnamed-chunk-5_d694c1f0b4c23619c0ae4a854ffead58'}\n\n```{.r .cell-code}\nlibrary(estimatr)\n\nmodel_iv <- iv_robust(time_spent ~ used_ftr | rand_enc, data = relationship_data)\nsummary(model_iv)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> iv_robust(formula = time_spent ~ used_ftr | rand_enc, data = relationship_data)\n#> \n#> Standard error type:  HC2 \n#> \n#> Coefficients:\n#>             Estimate Std. Error t value  Pr(>|t|) CI Lower CI Upper   DF\n#> (Intercept)   19.312     0.2248   85.89 0.000e+00   18.872    19.75 9998\n#> used_ftr       9.738     0.5353   18.19 8.716e-73    8.689    10.79 9998\n#> \n#> Multiple R-squared:  0.4921 ,\tAdjusted R-squared:  0.492 \n#> F-statistic:   331 on 1 and 9998 DF,  p-value: < 2.2e-16\n```\n:::\n:::\n\n4- I considered it biased, as the influence of the rand_enc which tests the unmeasured willingness to use the app was not integrated before. Since the estimate value decreased with the IV estimate, I consider the naive estimate is upward biased.",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}